<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Long data to wide latent growth mixture model — long2LGMM • MplusAutomation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Long data to wide latent growth mixture model — long2LGMM" />
<meta property="og:description" content="This function streamlines the process of converting long data into a format
that Mplus can use for latent growth mixture models in wide form.  It makes
use of continuous time scores, and these time scores must be supplied as
variables in the R dataset.  For the conversion to wide form, it is assumed
that although assessments may have happened in continuous time, a discrete
number of assessments (likely ismilar for all participants) were collected." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MplusAutomation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette.html">MplusAutomation Examples</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/michaelhallquist/MplusAutomation/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Long data to wide latent growth mixture model</h1>
    <small class="dont-index">Source: <a href='https://github.com/michaelhallquist/MplusAutomation/blob/master/R/trainlgmm.R'><code>R/trainlgmm.R</code></a></small>
    <div class="hidden name"><code>long2LGMM.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function streamlines the process of converting long data into a format
that Mplus can use for latent growth mixture models in wide form.  It makes
use of continuous time scores, and these time scores must be supplied as
variables in the R dataset.  For the conversion to wide form, it is assumed
that although assessments may have happened in continuous time, a discrete
number of assessments (likely ismilar for all participants) were collected.</p>
    </div>

    <pre class="usage"><span class='fu'>long2LGMM</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>idvar</span>,
  <span class='va'>assessmentvar</span>,
  <span class='va'>dv</span>,
  <span class='va'>timevars</span>,
  misstrick <span class='op'>=</span> <span class='cn'>TRUE</span>,
  k <span class='op'>=</span> <span class='fl'>1L</span>,
  title <span class='op'>=</span> <span class='st'>"Trajectory Model"</span>,
  base <span class='op'>=</span> <span class='st'>"trajmodel_"</span>,
  run <span class='op'>=</span> <span class='cn'>FALSE</span>,
  processors <span class='op'>=</span> <span class='fl'>1L</span>,
  starts <span class='op'>=</span> <span class='st'>"500 100"</span>,
  <span class='va'>newdata</span>,
  cov <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"un"</span>, <span class='st'>"independent"</span>, <span class='st'>"intercept"</span>, <span class='st'>"zero"</span><span class='op'>)</span>,
  <span class='va'>model</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame in long format (i.e., multiple rows per ID).</p></td>
    </tr>
    <tr>
      <th>idvar</th>
      <td><p>A character string of the variable name in the dataset
that is the ID variable.</p></td>
    </tr>
    <tr>
      <th>assessmentvar</th>
      <td><p>A character string of the variable name in the dataset that
indicates the particular assessment point for each timepoint.</p></td>
    </tr>
    <tr>
      <th>dv</th>
      <td><p>A character string of the dependent variable name.</p></td>
    </tr>
    <tr>
      <th>timevars</th>
      <td><p>A character vector of the time variables.
Can be a single variable or more than one.  By allowing more than one variable,
it is easy to include linear; linear and quadratic; it is also possible to
calculate splines in R and pass these. The variable names should be 7 characters
or fewer, each.</p></td>
    </tr>
    <tr>
      <th>misstrick</th>
      <td><p>A logical value whether to set values of the DV where a time variable
is missing to missing as well.  Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>An integer indicating the number of distinct classes to test.
Currently must be greater than 0 and less than 10.</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>A character string giving a title for the model</p></td>
    </tr>
    <tr>
      <th>base</th>
      <td><p>A character string providing a base name for model outputs,
that is combined with the number of classes.</p></td>
    </tr>
    <tr>
      <th>run</th>
      <td><p>A logical value whether or not to run the models or only
create the data and input files, but not run them.</p></td>
    </tr>
    <tr>
      <th>processors</th>
      <td><p>An integer value indicating the number of processors to use.</p></td>
    </tr>
    <tr>
      <th>starts</th>
      <td><p>A character string passed to Mplus providing the number of
random starts and iterations</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>A data frame of new values to use for generating predicted
trajectories by class.</p></td>
    </tr>
    <tr>
      <th>cov</th>
      <td><p>A character string indicating the random covariance structure to use</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>An optional argument, can pass an existing model, the output from
mplusModeler().</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>One valuable feature of this function is that it makes it possible to feed
any continuous time scores to Mplus for mixture modelling.  For example,
continuous linear time is straightforward, but so to are quadratic
time models or piecewise models.  Using facilities in R, spline models
are also comparatively easy to specify.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## Simulate Some Data from 3 classes</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.stats.ox.ac.uk/pub/MASS4/'>MASS</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1234</span><span class='op'>)</span>
<span class='va'>allcoef</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/pkg/MASS/man/mvrnorm.html'>mvrnorm</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>200</span>,
                   mu <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>2</span>, <span class='fl'>0</span><span class='op'>)</span>,
                   Sigma <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.2</span>, <span class='fl'>.1</span>, <span class='fl'>.01</span><span class='op'>)</span><span class='op'>)</span>,
                   empirical <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fu'><a href='https://rdrr.io/pkg/MASS/man/mvrnorm.html'>mvrnorm</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>200</span>,
                   mu <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>3.35</span>, <span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>,
                   Sigma <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.2</span>, <span class='fl'>.1</span>, <span class='fl'>.1</span><span class='op'>)</span><span class='op'>)</span>,
                   empirical <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fu'><a href='https://rdrr.io/pkg/MASS/man/mvrnorm.html'>mvrnorm</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>200</span>,
                   mu <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.35</span>, <span class='fl'>2</span>, <span class='op'>-</span><span class='fl'>2</span><span class='op'>)</span>,
                   Sigma <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.2</span>, <span class='fl'>.1</span>, <span class='fl'>.1</span><span class='op'>)</span><span class='op'>)</span>,
                   empirical <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>allcoef</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>allcoef</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>allcoef</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Class"</span>, <span class='st'>"I"</span>, <span class='st'>"L"</span>, <span class='st'>"Q"</span><span class='op'>)</span>
<span class='va'>allcoef</span><span class='op'>$</span><span class='va'>ID</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>allcoef</span><span class='op'>)</span>
<span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>rbind</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>allcoef</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>i</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
    ID <span class='op'>=</span> <span class='va'>allcoef</span><span class='op'>$</span><span class='va'>ID</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>,
    Class <span class='op'>=</span> <span class='va'>allcoef</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>,
    Assess <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>11</span>,
    x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>11</span>, min <span class='op'>=</span> <span class='op'>-</span><span class='fl'>2</span>, max <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>out</span><span class='op'>$</span><span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>11</span>,
    mean <span class='op'>=</span> <span class='va'>allcoef</span><span class='op'>$</span><span class='va'>I</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>allcoef</span><span class='op'>$</span><span class='va'>L</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>out</span><span class='op'>$</span><span class='va'>x</span> <span class='op'>+</span> <span class='va'>allcoef</span><span class='op'>$</span><span class='va'>Q</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>out</span><span class='op'>$</span><span class='va'>x</span><span class='op'>^</span><span class='fl'>2</span>,
    sd <span class='op'>=</span> <span class='fl'>.1</span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## create splines</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>splines</span><span class='op'>)</span>
<span class='va'>time_splines</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/splines/ns.html'>ns</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>$</span><span class='va'>x</span>, df <span class='op'>=</span> <span class='fl'>3</span>, Boundary.knots <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>$</span><span class='va'>x</span>, probs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.02</span>, <span class='fl'>.98</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>d</span><span class='op'>$</span><span class='va'>t1</span> <span class='op'>&lt;-</span> <span class='va'>time_splines</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>
<span class='va'>d</span><span class='op'>$</span><span class='va'>t2</span> <span class='op'>&lt;-</span> <span class='va'>time_splines</span><span class='op'>[</span>, <span class='fl'>2</span><span class='op'>]</span>
<span class='va'>d</span><span class='op'>$</span><span class='va'>t3</span> <span class='op'>&lt;-</span> <span class='va'>time_splines</span><span class='op'>[</span>, <span class='fl'>3</span><span class='op'>]</span>
<span class='va'>d</span><span class='op'>$</span><span class='va'>xq</span> <span class='op'>&lt;-</span> <span class='va'>d</span><span class='op'>$</span><span class='va'>x</span><span class='op'>^</span><span class='fl'>2</span>

<span class='co'>## create new data to be used for predictions</span>
<span class='va'>nd</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>ID <span class='op'>=</span> <span class='fl'>1</span>,
                 x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='op'>-</span><span class='fl'>2</span>, to <span class='op'>=</span> <span class='fl'>2</span>, by <span class='op'>=</span> <span class='fl'>.1</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>nd.splines</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>time_splines</span><span class='op'>)</span>,
                   <span class='fu'><a href='https://rdrr.io/r/splines/ns.html'>ns</a></span><span class='op'>(</span><span class='va'>nd</span><span class='op'>$</span><span class='va'>x</span>, df <span class='op'>=</span> <span class='va'>degree</span>, knots <span class='op'>=</span> <span class='va'>knots</span>,
                      Boundary.knots <span class='op'>=</span> <span class='va'>Boundary.knots</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>nd</span><span class='op'>$</span><span class='va'>t1</span> <span class='op'>&lt;-</span> <span class='va'>nd.splines</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span>
<span class='va'>nd</span><span class='op'>$</span><span class='va'>t2</span> <span class='op'>&lt;-</span> <span class='va'>nd.splines</span><span class='op'>[</span>, <span class='fl'>2</span><span class='op'>]</span>
<span class='va'>nd</span><span class='op'>$</span><span class='va'>t3</span> <span class='op'>&lt;-</span> <span class='va'>nd.splines</span><span class='op'>[</span>, <span class='fl'>3</span><span class='op'>]</span>
<span class='va'>nd</span><span class='op'>$</span><span class='va'>xq</span> <span class='op'>&lt;-</span> <span class='va'>nd</span><span class='op'>$</span><span class='va'>x</span><span class='op'>^</span><span class='fl'>2</span>

<span class='co'>## create a tuning grid of models to try</span>
<span class='co'>## all possible combinations are created of different time trends</span>
<span class='co'>## different covariance structures of the random effects</span>
<span class='co'>## and different number of classes</span>
<span class='va'>tuneGrid</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/expand.grid.html'>expand.grid</a></span><span class='op'>(</span>
  dv <span class='op'>=</span> <span class='st'>"y"</span>,
  timevars <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"t1"</span>, <span class='st'>"t2"</span>, <span class='st'>"t3"</span><span class='op'>)</span>, <span class='st'>"x"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"x"</span>, <span class='st'>"xq"</span><span class='op'>)</span><span class='op'>)</span>,
  starts <span class='op'>=</span> <span class='st'>"2 1"</span>,
  cov <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"independent"</span>, <span class='st'>"zero"</span><span class='op'>)</span>,
  k <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1L</span>, <span class='fl'>3L</span><span class='op'>)</span>,
  processors <span class='op'>=</span> <span class='fl'>1L</span>, run <span class='op'>=</span> <span class='cn'>TRUE</span>,
  misstrick <span class='op'>=</span> <span class='cn'>TRUE</span>, stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>title</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"linear"</span>, <span class='st'>"quad"</span>, <span class='st'>"spline"</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>timevars</span>, <span class='va'>length</span><span class='op'>)</span><span class='op'>]</span>,
  <span class='st'>"_"</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>cov</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>==</span><span class='fl'>4</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substr</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fl'>1</span>, <span class='fl'>4</span><span class='op'>)</span> <span class='kw'>else</span> <span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substr</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='st'>"_"</span>,
  <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>k</span><span class='op'>)</span>
<span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>base</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"linear"</span>, <span class='st'>"quad"</span>, <span class='st'>"spline"</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>timevars</span>, <span class='va'>length</span><span class='op'>)</span><span class='op'>]</span>,
  <span class='st'>"_"</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>cov</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nchar.html'>nchar</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>==</span><span class='fl'>4</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substr</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fl'>1</span>, <span class='fl'>4</span><span class='op'>)</span> <span class='kw'>else</span> <span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substr</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## example using long2LGMM to fit one model at a time</span>
<span class='va'>mres</span> <span class='op'>&lt;-</span> <span class='fu'>long2LGMM</span><span class='op'>(</span>
        data <span class='op'>=</span> <span class='va'>d</span>,
        idvar <span class='op'>=</span> <span class='st'>"ID"</span>,
        assessmentvar <span class='op'>=</span> <span class='st'>"Assess"</span>,
        dv <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>dv</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        timevars <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>timevars</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>,
        misstrick <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>misstrick</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        k <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>k</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        title <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>title</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>k</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>,
        base <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>base</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        run <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>run</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        processors <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>processors</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        starts <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>starts</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
        newdata <span class='op'>=</span> <span class='va'>nd</span>,
        cov <span class='op'>=</span> <span class='va'>tuneGrid</span><span class='op'>$</span><span class='va'>cov</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>mres</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Hallquist, Joshua Wiley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


