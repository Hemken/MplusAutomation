<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create tab-delimited file and Mplus input syntax from R data.frame — prepareMplusData • MplusAutomation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create tab-delimited file and Mplus input syntax from R data.frame — prepareMplusData" />
<meta property="og:description" content="The prepareMplusData function converts an R data.frame
(or a list of data frames), into a tab-delimited
file (without header) to be used in an Mplus
input file. The corresponding Mplus syntax, including the
data file definition and variable names,
is printed to the console or optionally to an input file." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MplusAutomation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette.html">MplusAutomation Examples</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/michaelhallquist/MplusAutomation/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create tab-delimited file and Mplus input syntax from R data.frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/michaelhallquist/MplusAutomation/blob/master/R/prepareMplusData.R'><code>R/prepareMplusData.R</code></a></small>
    <div class="hidden name"><code>prepareMplusData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>prepareMplusData</code> function converts an R data.frame
(or a list of data frames), into a tab-delimited
file (without header) to be used in an Mplus
input file. The corresponding Mplus syntax, including the
data file definition and variable names,
is printed to the console or optionally to an input file.</p>
    </div>

    <pre class="usage"><span class='fu'>prepareMplusData</span><span class='op'>(</span>
  <span class='va'>df</span>,
  filename <span class='op'>=</span> <span class='cn'>NULL</span>,
  inpfile <span class='op'>=</span> <span class='cn'>FALSE</span>,
  keepCols <span class='op'>=</span> <span class='cn'>NULL</span>,
  dropCols <span class='op'>=</span> <span class='cn'>NULL</span>,
  dummyCode <span class='op'>=</span> <span class='cn'>NULL</span>,
  interactive <span class='op'>=</span> <span class='cn'>TRUE</span>,
  overwrite <span class='op'>=</span> <span class='cn'>TRUE</span>,
  imputed <span class='op'>=</span> <span class='cn'>FALSE</span>,
  writeData <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"always"</span>, <span class='st'>"ifmissing"</span>, <span class='st'>"never"</span><span class='op'>)</span>,
  hashfilename <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>The R data.frame to be prepared for Mplus</p></td>
    </tr>
    <tr>
      <th>filename</th>
      <td><p>The path and filename for the tab-delimited data file
for use with Mplus. Example: "C:/Mplusdata/data1.dat"</p></td>
    </tr>
    <tr>
      <th>inpfile</th>
      <td><p>Logical value whether the Mplus syntax should be written
to the console or to an input file. Defaults to <code>FALSE</code>. If
<code>TRUE</code>, the file name will be the same as <code>filename</code> with
the extension changed to .inp.  Alternately, this can be a character
string giving the file name to write the Mplus syntax to.</p></td>
    </tr>
    <tr>
      <th>keepCols</th>
      <td><p>A character vector specifying the variable names
within <code>df</code> to be output to <code>filename</code> or a numeric
vector of the column indices to be output or a logical vector
corresponding to the same.</p></td>
    </tr>
    <tr>
      <th>dropCols</th>
      <td><p>A character vector specifying the variable names
within <code>df</code> to be omitted from the data output to <code>filename</code>
or a numeric vector of the column indices not to be output
or a logical vector corresponding to the same.</p></td>
    </tr>
    <tr>
      <th>dummyCode</th>
      <td><p>An optional character vector of column names indicating
categorical variables in the dataset that should be converted into
dummy codes (using the <code>fastDummies</code> package). Note that one dummy
code is returned for *each level*, so no reference category is implied.
Thus, it is up to you to drop one of the dummy codes in the Mplus syntax
to denote the reference category and avoid multicollinearity.</p></td>
    </tr>
    <tr>
      <th>interactive</th>
      <td><p>Logical value indicating whether file names
should be selected interactively. If <code>filename</code> is
missing and <code>interative=TRUE</code>, then a dialogue box
will pop up to select a file or a console prompt if in a
non interactive context. Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>Logical value indicating whether
data and input (if present) files should be overwritten.
Defaults to <code>TRUE</code> to be consistent with prior behavior.
If <code>FALSE</code> and the file to write the data to already exists,
it will throw an error.</p></td>
    </tr>
    <tr>
      <th>imputed</th>
      <td><p>A logical whether data are multiply imputed.  Defaults
to <code>FALSE</code>.  If <code>TRUE</code>, the data should be a list,
where each element of the list is a multiply imputed dataset.</p></td>
    </tr>
    <tr>
      <th>writeData</th>
      <td><p>A character vector, one of &#8216;always&#8217;,
&#8216;ifmissing&#8217;, &#8216;never&#8217; indicating whether the data files
(*.dat) should be written to disk.  Defaults to
&#8216;always&#8217; for consistency with previous behavior.
See details for further information.</p></td>
    </tr>
    <tr>
      <th>hashfilename</th>
      <td><p>A logical whether or not to add a hash of the raw data to the
data file name.  Defaults to <code>FALSE</code> for consistency with previous
behavior where this feature was not available..</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Invisibly returns a character vector of the Mplus input
  syntax. Primarily called for its side effect of creating Mplus
  data files and optionally input files.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>writeData</code> argument is new and can be used to reduce overhead
from repeatedly writing the same data from R to the disk.  When using the
&#8216;always&#8217; option, <code>prepareMplusData</code> behaves as before, always writing
data from R to the disk.  When &#8216;ifmissing&#8217;, R generates an
md5 hash of the data prior to writing it out to the disk.  The md5 hash is based on:
(1) the dimensions of the dataset, (2) the variable names,
(3) the class of every variable, and (4) the raw data from the first and last rows.
This combination ensures that under most all circumstances, if the data changes,
the hash will change.  The hash is appended to the specified data file name
(which is controlled by the logical <code>hashfilename</code> argument).  Next R
checks in the directory where the data would normally be written.  If a data file
exists in that directory that matches the hash generated from the data, R will
use that existing data file instead of writing out the data again.
A final option is &#8216;never&#8217;.  If this option is used, R will not write
the data out even if no file matching the hash is found.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Michael Hallquist</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://svn.r-project.org/R-packages/trunk/foreign/'>foreign</a></span><span class='op'>)</span>

<span class='va'>study5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/foreign/man/read.spss.html'>read.spss</a></span><span class='op'>(</span><span class='st'>"reanalysis-study-5-mt-fall-08.sav"</span>, to.data.frame<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>ASData5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>study5</span>, select<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ppnum"</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"as"</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>33</span>, sep<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>ASData5</span>, <span class='st'>"study5.dat"</span><span class='op'>)</span>


<span class='co'># basic example</span>
<span class='va'>test01</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test01.dat"</span><span class='op'>)</span>



<span class='co'># see that syntax was stored</span>
<span class='va'>test01</span>

<span class='co'># example when there is a factor and logical</span>
<span class='va'>tmpd</span> <span class='op'>&lt;-</span> <span class='va'>mtcars</span>
<span class='va'>tmpd</span><span class='op'>$</span><span class='va'>cyl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>tmpd</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>
<span class='va'>tmpd</span><span class='op'>$</span><span class='va'>am</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='va'>tmpd</span><span class='op'>$</span><span class='va'>am</span><span class='op'>)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>tmpd</span>, <span class='st'>"test_type.dat"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>tmpd</span><span class='op'>)</span>

<span class='co'># by default, if re-run, data is re-written, with a note</span>
<span class='va'>test01b</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test01.dat"</span><span class='op'>)</span>

<span class='co'># if we turn on hashing in the filename the first time,</span>
<span class='co'># we can avoid overwriting notes the second time</span>
<span class='va'>test01c</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test01c.dat"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># now that the filename was hashed in test01c, future calls do not re-write data</span>
<span class='co'># as long as the hash matches</span>
<span class='va'>test01d</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test01c.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># now that the filename was hashed in test01c, future calls do not re-write data</span>
<span class='co'># as long as the hash matches</span>
<span class='va'>test01db</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test01d.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># however, if the data change, then the file is re-written</span>
<span class='va'>test01e</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>iris</span>, <span class='st'>"test01c.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># tests for keeping and dropping variables</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test02.dat"</span>, keepCols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mpg"</span>, <span class='st'>"hp"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test03.dat"</span>, keepCols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test04.dat"</span>,
  keepCols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>,
  <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test05.dat"</span>, dropCols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mpg"</span>, <span class='st'>"hp"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test06.dat"</span>, dropCols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test07.dat"</span>,
  dropCols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>,
  <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># interactive (test08.dat)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, interactive<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># write syntax to input file, not stdout</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test09.dat"</span>, inpfile<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># write syntax to alternate input file, not stdout</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test10.dat"</span>, inpfile<span class='op'>=</span><span class='st'>"test10alt.inp"</span><span class='op'>)</span>

<span class='co'># should be error, no file</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, interactive<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># new warnings if it is going to overwrite files</span>
<span class='co'># (the default to be consistent with prior behavior)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test10.dat"</span><span class='op'>)</span>

<span class='co'># new warnings if it is going to overwrite files</span>
<span class='co'># (the default to be consistent with prior behavior)</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test11.dat"</span>, inpfile<span class='op'>=</span><span class='st'>"test10alt.inp"</span><span class='op'>)</span>

<span class='co'># new errors if files exist and overwrite=FALSE</span>
<span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"test10.dat"</span>,
  inpfile<span class='op'>=</span><span class='st'>"test10alt.inp"</span>, overwrite<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>


<span class='co'># can write multiply imputed data too</span>
<span class='co'># here are three "imputed" datasets</span>
<span class='va'>idat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>mpg <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, hp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>hp</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>mpg <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, hp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>110</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>hp</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>mpg <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, hp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>120</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>hp</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># if we turn on hashing in the filename the first time,</span>
<span class='co'># we can avoid overwriting notes the second time</span>
<span class='va'>testimp1</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>idat</span>, <span class='st'>"testi1.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span>,
  imputed <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># now that the filename was hashed, future calls do not re-write data</span>
<span class='co'># as long as all the hashes match</span>
<span class='va'>testimp2</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>idat</span>, <span class='st'>"testi2.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span>,
  imputed <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># in fact, the number of imputations can decrease</span>
<span class='co'># and they still will not be re-written</span>
<span class='va'>testimp3</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>idat</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>3</span><span class='op'>]</span>, <span class='st'>"testi3.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span>,
  imputed <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># however, if the data changes, then all are re-written</span>
<span class='co'># note that it warns for the two files that already exist</span>
<span class='co'># as these two are overwritten</span>

<span class='va'>idat2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>mpg <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, hp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>hp</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>mpg <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, hp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>109</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>hp</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>mpg <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, hp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>120</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>hp</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>testimp4</span> <span class='op'>&lt;-</span> <span class='fu'>prepareMplusData</span><span class='op'>(</span><span class='va'>idat2</span>, <span class='st'>"testi4.dat"</span>,
  writeData <span class='op'>=</span> <span class='st'>"ifmissing"</span>, hashfilename<span class='op'>=</span><span class='cn'>TRUE</span>,
  imputed <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>


<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Hallquist, Joshua Wiley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


